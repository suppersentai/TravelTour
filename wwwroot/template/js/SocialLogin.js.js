var config;function initScript(_config){config=_config;}
(function(d){var js,id='facebook-jssdk',ref=d.getElementsByTagName('script')[0];if(d.getElementById(id)){return;}
js=d.createElement('script');js.id=id;js.async=true;js.src="//connect.facebook.net/en_US/sdk.js";ref.parentNode.insertBefore(js,ref);}(document));window.fbAsyncInit=function(){FB.init({appId:'486170608123974',status:true,cookie:true,xfbml:true,version:'v11.0'},{scope:'email'});};$(document).ready(function(){'use strict';$('#signInFacebook').click(function(){FacebookLogin();})
$('.lbtLogOutFacebook').click(function(){FacebookLogout();var token=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"/AccountCustomer/LogOut",headers:{"__RequestVerificationToken":token},type:"POST",success:function(data){if(data.success==="True"){location.reload();}},error:function(data){console.log(data);}})})});function FacebookLogin(){FB.login(function(response){if(response&&!response.error&&response.status=="connected"){getFacebookUserInfo();}else{console.log('User cancelled login or did not fully authorize.');}},{scope:'email,public_profile'});}
function checkPermissionGranted(){FB.api("/me/permissions",function(response){if(response&&!response.error){console.log(response);}});}
function reLoginPermissions(permissions){FB.login(function(response){console.log(response);},{scope:permissions,auth_type:'rerequest'});}
function getFacebookUserInfo(){FB.api('/me?fields=email,name',function(response){var token=$('input[name="__RequestVerificationToken"]').val();var imageUrl='https://graph.facebook.com/'+response.id+'/picture?type=normal&width=500&height=500';$.ajax({url:"/AccountMember/SocialMediaLogin",type:"POST",data:{"__RequestVerificationToken":token,'Id':response.id,'FullName':response.name,'Email':response.email,'Image':imageUrl,'DataFrom':"Facebook",'TypeLogin':1},success:function(data){if(data.success===1){alert(data.message);window.location.href=config.returnUrl;}
else{alert("Vui lòng thử lại sau");}},error:function(data){alert("Vui lòng thử lại sau");console.log(data);}})});}
function FacebookLogout(){FB.logout(function(){document.location.reload();});}
var googleUser={};var startApp=function(){gapi.load('auth2',function(){auth2=gapi.auth2.init({client_id:'164359386928-7ir90j027vt1aegb1d02rsrqv3t1crg4.apps.googleusercontent.com',cookiepolicy:'single_host_origin',});attachSignin(document.getElementById('customBtn'));});};function attachSignin(element){auth2.attachClickHandler(element,{},function(googleUser){var profile=googleUser.getBasicProfile();console.log(profile);console.log('Image URL: '+profile.getImageUrl());var token=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"/AccountMember/SocialMediaLogin",type:"POST",data:{"__RequestVerificationToken":token,'Id':profile.getId(),'FirstName':profile.getGivenName(),'LastName':profile.getFamilyName(),'FullName':profile.getName(),'Email':profile.getEmail(),'Image':profile.getImageUrl(),'DataFrom':"Google",'TypeLogin':2},success:function(data){if(data.success===1){alert(data.message);window.location.href=config.returnUrl;}
else{alert("Vui lòng thử lại sau");}},error:function(){alert("Vui lòng thử lại sau");}})},function(error){alert(JSON.stringify(error,undefined,2));});}
function googleSignOut(){var auth2=gapi.auth2.getAuthInstance();auth2.signOut().then(function(){console.log('User signed out.');});}